# bun-coverage-report-action

GitHub Action that generates coverage reports from Bun test LCOV output and comments on Pull Requests.

## Features

- Parses LCOV coverage files generated by `bun test --coverage`
- Posts coverage summary as PR comments
- Supports coverage thresholds with action failure
- Compatible with `vitest-coverage-report-action` UI
- Built with TDD methodology

## Usage

### Basic Setup

Add this to your workflow file (e.g., `.github/workflows/test.yml`):

```yaml
name: Test with Coverage

on: [pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write
    
    steps:
      - uses: actions/checkout@v4
      
      - uses: oven-sh/setup-bun@v2
        with:
          bun-version: "1.2.x"
      
      - run: bun install --frozen-lockfile
      
      - name: Run Bun tests with coverage
        run: bun test --coverage --coverage-reporter=lcov --coverage-dir=coverage
      
      - name: Coverage Report
        uses: 70-10/bun-coverage-report-action@v1
        with:
          lcov-path: coverage/lcov.info
          min-coverage: 80
```

### Inputs

| Input | Description | Default |
|-------|-------------|---------|
| `lcov-path` | Path to LCOV coverage file | `coverage/lcov.info` |
| `min-coverage` | Minimum coverage threshold (%) | `0` |
| `github-token` | GitHub token for PR comments | `${{ github.token }}` |
| `working-directory` | Working directory | `./` |
| `name` | Coverage report name | `""` |
| `pr-number` | PR number to comment on | `""` |

## Development

### Install Dependencies

```bash
bun install
```

### Run Tests

```bash
bun test
```

### Build Action

```bash
bun run build
```

## TDD Development

This project was built using Test-Driven Development (TDD) with the Red-Green-Refactor cycle:

1. **RED**: Write failing tests first
2. **GREEN**: Implement minimal code to pass tests  
3. **REFACTOR**: Clean up and optimize code

## License

MIT
